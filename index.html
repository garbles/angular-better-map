<html ng-app='app'>
  <head>
    <meta http-equiv='content-type' content='text/html; charset=utf-8' />

    <title></title>
    <script type='text/javascript' charset='utf-8' src='bower_components/angular/angular.js'></script>
    <script type='text/javascript' charset='utf-8' src='src/angular-better-map.js'></script>
  </head>
  <body ng-controller='gabe'>
    <div id='map' better-map bm-events='events' bm-options='options' bm-onload='addCenterMarker'></div>
    <style>
      #map {
        height: 400px;
        width: 400px;
      }
    </style>
    <script type='text/javascript' charset='utf-8'>
      angular.module('app', ['betterMap'])
      .controller('gabe', ['$scope', 'bm.Maps', function ($scope, Maps) {

        $scope.options = Maps.then(function (api) {
          return { zoom: 15, center: new api.LatLng(35.784, -78.670) }
        });

        $scope.events = Maps.then(function () {
          return {
            map_click: mapClick,
            marker_click: markerClick
          };
        });

        function mapClick (e, params) {
          params.map.addMarker({
            position: params.latLng
          });
        }

        function markerClick (e, params) {
          alert('hi');
        }

        $scope.addCenterMarker = function (map) {
          map.addMarker({});
        }

      }]);
    </script>
  </body>
</html>
